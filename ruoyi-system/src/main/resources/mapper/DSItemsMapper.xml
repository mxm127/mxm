<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.DSItemsMapper">
    
    <resultMap type="DSItems" id="DSItemsResult">
        <result property="itemId"    column="item_id"    />
        <result property="classType"    column="class_type"    />
        <result property="teacher"    column="teacher"    />
        <result property="phonenumber"    column="phonenumber"    />
        <result property="entryForm"    column="entry_form"    />
        <result property="commitTime"    column="commit_time"    />
        <result property="school"    column="school"    />
        <result property="information"    column="information"    />
        <result property="title"    column="title"    />
        <result property="subTitle"    column="subTitle"    />
        <result property="cource"    column="cource"    />
        <result property="createBy"    column="create_by"    />
        <result property="updateTime"    column="update_time"    />
        <result property="view"    column="view"    />
        <result property="cover"    column="cover"    />
        <result property="vote"    column="vote"    />
        <result property="status"    column="status"    />
        <result property="exhibitFlag"    column="exhibit_flag"    />
        <result property="sortType"    column="sort_type"    />
    </resultMap>

    <sql id="selectDSItemsVo">
        select item_id, class_type, teacher, phonenumber, entry_form, commit_time, school, information, title, subTitle, cource, create_by, update_time, view, cover, vote, status, exhibit_flag, sort_type from sys_items
    </sql>

    <select id="selectDSItemsList" parameterType="DSItems" resultMap="DSItemsResult">
        <include refid="selectDSItemsVo"/>
        <where>  
            <if test="itemId != null "> and item_id = #{itemId}</if>
            <if test="classType != null  and classType != ''"> and class_type = #{classType}</if>
            <if test="teacher != null  and teacher != ''"> and teacher = #{teacher}</if>
            <if test="phonenumber != null  and phonenumber != ''"> and phonenumber = #{phonenumber}</if>
            <if test="entryForm != null  and entryForm != ''"> and entry_form = #{entryForm}</if>
            <if test="commitTime != null "> and commit_time = #{commitTime}</if>
            <if test="school != null  and school != ''"> and school = #{school}</if>
            <if test="information != null  and information != ''"> and information = #{information}</if>
            <if test="title != null  and title != ''"> and title = #{title}</if>
            <if test="subTitle != null  and subTitle != ''"> and subTitle = #{subTitle}</if>
            <if test="cource != null "> and cource = #{cource}</if>
            <if test="view != null "> and view = #{view}</if>
            <if test="cover != null  and cover != ''"> and cover = #{cover}</if>
            <if test="vote != null "> and vote = #{vote}</if>
            <if test="status != null  and status != ''"> and status = #{status}</if>
            <if test="exhibitFlag != null  and exhibitFlag != ''"> and exhibit_flag = #{exhibitFlag}</if>
            <if test="sortType != null "> and sort_type = #{sortType}</if>
        </where>
    </select>
    
    <select id="selectDSItemsByItemId" parameterType="Long" resultMap="DSItemsResult">
        <include refid="selectDSItemsVo"/>
        where item_id = #{itemId}
    </select>
        
    <insert id="insertDSItems" parameterType="DSItems" useGeneratedKeys="true" keyProperty="itemId">
        insert into sys_items
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="classType != null">class_type,</if>
            <if test="teacher != null">teacher,</if>
            <if test="phonenumber != null">phonenumber,</if>
            <if test="entryForm != null">entry_form,</if>
            <if test="commitTime != null">commit_time,</if>
            <if test="school != null">school,</if>
            <if test="information != null">information,</if>
            <if test="title != null">title,</if>
            <if test="subTitle != null">subTitle,</if>
            <if test="cource != null">cource,</if>
            <if test="createBy != null">create_by,</if>
            <if test="updateTime != null">update_time,</if>
            <if test="view != null">view,</if>
            <if test="cover != null">cover,</if>
            <if test="vote != null">vote,</if>
            <if test="status != null">status,</if>
            <if test="exhibitFlag != null">exhibit_flag,</if>
            <if test="sortType != null">sort_type,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="classType != null">#{classType},</if>
            <if test="teacher != null">#{teacher},</if>
            <if test="phonenumber != null">#{phonenumber},</if>
            <if test="entryForm != null">#{entryForm},</if>
            <if test="commitTime != null">#{commitTime},</if>
            <if test="school != null">#{school},</if>
            <if test="information != null">#{information},</if>
            <if test="title != null">#{title},</if>
            <if test="subTitle != null">#{subTitle},</if>
            <if test="cource != null">#{cource},</if>
            <if test="createBy != null">#{createBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
            <if test="view != null">#{view},</if>
            <if test="cover != null">#{cover},</if>
            <if test="vote != null">#{vote},</if>
            <if test="status != null">#{status},</if>
            <if test="exhibitFlag != null">#{exhibitFlag},</if>
            <if test="sortType != null">#{sortType},</if>
         </trim>
    </insert>
    <update id="addView">
        update sys_items set view = view+1 where item_id = #{itemId}
    </update>

    <update id="updateDSItems" parameterType="DSItems">
        update sys_items
        <trim prefix="SET" suffixOverrides=",">
            <if test="classType != null">class_type = #{classType},</if>
            <if test="teacher != null">teacher = #{teacher},</if>
            <if test="phonenumber != null">phonenumber = #{phonenumber},</if>
            <if test="entryForm != null">entry_form = #{entryForm},</if>
            <if test="commitTime != null">commit_time = #{commitTime},</if>
            <if test="school != null">school = #{school},</if>
            <if test="information != null">information = #{information},</if>
            <if test="title != null">title = #{title},</if>
            <if test="subTitle != null">subTitle = #{subTitle},</if>
            <if test="cource != null">cource = #{cource},</if>
            <if test="createBy != null">create_by = #{createBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
            <if test="view != null">view = #{view},</if>
            <if test="cover != null">cover = #{cover},</if>
            <if test="vote != null">vote = #{vote},</if>
            <if test="status != null">status = #{status},</if>
            <if test="exhibitFlag != null">exhibit_flag = #{exhibitFlag},</if>
            <if test="sortType != null">sort_type = #{sortType},</if>
        </trim>
        where item_id = #{itemId}
    </update>

    <delete id="deleteDSItemsByItemId" parameterType="Long">
        delete from sys_items where item_id = #{itemId}
    </delete>

    <delete id="deleteDSItemsByItemIds" parameterType="String">
        delete from sys_items where item_id in 
        <foreach item="itemId" collection="array" open="(" separator="," close=")">
            #{itemId}
        </foreach>
    </delete>
</mapper>